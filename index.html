<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/src/images/logo.jpg">
    <link rel="stylesheet" href="src/styles/home.css">
    <link rel="stylesheet" href="src/styles/comidas.css">
    <link rel="stylesheet" href="src/styles/sabores.css">
    <link rel="stylesheet" href="src/styles/sobre.css">
    <link rel="stylesheet" href="src/styles/promo.css">
    <link rel="stylesheet" href="src/styles/depoimentos.css">
    <link rel="stylesheet" href="src/styles/service.css">
    <link rel="stylesheet" href="src/styles/footer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.1/aos.css"> <!-- Link AOS -->
    <title>Sabor do Amor | Delivery</title>
</head>
<body>
    <script>
        function enviarMensagem(mensagem) {
            const numero = "+5583981451697"; // Seu número de WhatsApp
            const url = `https://wa.me/${numero}?text=${encodeURIComponent(mensagem)}`;
            window.open(url, '_blank'); // Abre o WhatsApp em uma nova aba
        }
    </script>

<div class="background"></div>

    <header data-aos="fade-down">
        <div data-aos="fade-right">
            <img loading="lazy" src="src/images/logo.jpg" alt="logo sabor do amor">
        </div>
        <nav data-aos="fade-left">
            <ul>
                <a href="#">Inicio</a>
                <a href="./nhoque.html">Nhoque</a>
                <a href="./lasanha.html">Lasanha</a>
                <a href="./empada.html">Empadão</a>
                <a href="./salgados.html">Salgados</a>
                <a href="#sobrenos">Sobre nós</a>
                <a href="#contato">Contato</a>
            </ul>
        </nav>
        <button class="buttonStyle" onclick="enviarMensagem('Olá, vim do site, gostaria de fazer um pedido!')" data-aos="fade-up">Fazer meu pedido agora <i class="fa-solid fa-utensils"></i></button>
    </header>

    <div class="home" data-aos="zoom-in">
        <h1 data-aos="fade-up">Sabor com Amor</h1>
        <p data-aos="fade-up">O sabor que chega com carinho até você!</p>
        <button class="buttonStyle2" onclick="enviarMensagem('Olá, vim do site, gostaria de fazer um pedido!')" data-aos="fade-up">Fazer meu pedido agora <i class="fa-solid fa-utensils"></i></button>
    </div>

    <section class="comidas" data-aos="fade-up">
        <div class="comidaTitle" data-aos="fade-up">
            <h1>Sabor com Amor</h1>
            <hr>
        </div>

        <div class="comidaComidas" data-aos="fade-up">
            <div data-aos="fade-up">
                <h2>Nhoque</h2>
                <button onclick="enviarMensagem('Olá, vim do site, gostaria de fazer um pedido!')">Pedir agora!</button>
            </div>
            <div data-aos="fade-up">
                <h2>Lasanha</h2>
                <button onclick="enviarMensagem('Olá, vim do site, gostaria de fazer um pedido!')">Pedir agora!</button>
            </div>
            <div data-aos="fade-up">
                <h2>Empadão</h2>
                <button onclick="enviarMensagem('Olá, vim do site, gostaria de fazer um pedido!')">Pedir agora!</button>
            </div>
            <div data-aos="fade-up">
                <h2>Salgados</h2>
                <button onclick="enviarMensagem('Olá, vim do site, gostaria de fazer um pedido!')">Pedir agora!</button>
            </div>
        </div>
    </section>

    <section class="sabores" data-aos="fade-up">
        <div class="saboresTitle" data-aos="fade-up">
            <h1>Nossos sabores</h1>
            <hr>
        </div>

        <div class="saborContainer" data-aos="fade-up">
            <div class="sabor" data-aos="fade-up">
                <img loading="lazy" src="/src/images/nhoque.jpg" alt="Foto do nhoque">
                <h2>Nhoque</h2>
                <ol>
                    <li>Bolonhesa</li>
                    <li>4 Queijos</li>
                    <li>Calabresa</li>
                    <li>Frango</li>
                </ol>
                <span>A partir de: <b>R$20,00</b></span>
                <button onclick="enviarMensagem('Olá, vim do site, gostaria de fazer um pedido!')"><i class="fa-solid fa-utensils"></i> Pedir agora!</button>
            </div>

            <div class="sabor" data-aos="fade-up">
                <img loading="lazy" src="/src/images/lasanha.jpg" alt="Foto do nhoque">
                <h2>Lasanha</h2>
                <ol>
                    <li>Bolonhesa</li>
                    <li>4 Queijos</li>
                    <li>Calabresa</li>
                    <li>Frango</li>
                </ol>
                <span>A partir de: <b>R$20,00</b></span>
                <button onclick="enviarMensagem('Olá, vim do site, gostaria de fazer um pedido!')"><i class="fa-solid fa-utensils"></i> Pedir agora!</button>
            </div>

            <div class="sabor" data-aos="fade-up">
                <img loading="lazy" src="/src/images/empadao.jpg" alt="Foto do nhoque">
                <h2>Empadão</h2>
                <ol>
                    <li>Bolonhesa</li>
                    <li>4 Queijos</li>
                    <li>Calabresa</li>
                    <li>Frango</li>
                </ol>
                <span>A partir de: <b>R$20,00</b></span>
                <button onclick="enviarMensagem('Olá, vim do site, gostaria de fazer um pedido!')"><i class="fa-solid fa-utensils"></i> Pedir agora!</button>
            </div>

            <div class="sabor" data-aos="fade-up">
                <img loading="lazy" src="/src/images/salagados.jpg" alt="Foto do nhoque">
                <h2>Salgados</h2>
                <ol>
                    <li>Empada</li>
                    <li>Coxinha (Frango)</li>
                    <li>Risole</li>
                    <li>Folheado (Frango, Calabresa e 4 Queijos)</li>
                </ol>
                <span>A partir de: <b>R$20,00</b></span>
                <button onclick="enviarMensagem('Olá, vim do site, gostaria de fazer um pedido!')"> <i class="fa-solid fa-utensils"></i>Pedir agora!</button>
            </div>
        </div>
    </section>

    <section class="sobre" id="sobrenos" data-aos="fade-up">
        <div>
            <h1>Quem somos nós?</h1>
            <hr>
            <p>Sabor com Amor se dedica a oferecer experiências culinárias inesquecíveis para todos os amantes da boa comida. Com uma equipe de chefs e ingredientes selecionados, garantimos pratos que encantam pelo sabor e apresentação.</p>
        </div>
    </section>

    <section class="promo" data-aos="fade-up">
        <main>
            <h1>Promoção Especial</h1>
            <hr>
            <div data-aos="fade-up">
                <img loading="lazy" src="/src/images/empadao.jpg" alt="Foto do nhoque">
                <h2>Empadão</h2>
                <ol>
                    <li>Bolonhesa</li>
                    <li>4 Queijos</li>
                    <li>Calabresa</li>
                    <li>Frango</li>
                </ol>
                <span>A partir de: <b>R$20,00</b></span>
                <button onclick="enviarMensagem('Olá, vim do site, gostaria de fazer um pedido!')">Pedir agora!</button>
            </div>
        </main>
    </section>

    <section id="testimonials">
        <h2>Depoimentos</h2>
        
        <form id="testimonial-form">
            <input type="text" id="name" placeholder="Seu Nome" required>
            <div class="rating">
                <label for="stars">Avaliação: </label>
                <span class="star" data-value="1">&#9733;</span>
                <span class="star" data-value="2">&#9733;</span>
                <span class="star" data-value="3">&#9733;</span>
                <span class="star" data-value="4">&#9733;</span>
                <span class="star" data-value="5">&#9733;</span>
                <input type="hidden" id="rating" value="0" required>
            </div>
            <textarea id="opinion" placeholder="Seu Depoimento" required></textarea>
            <input class="arquivo" type="file" id="imageUpload" accept="image/*">
            <button class="enviar" type="submit">Enviar</button>
        </form>
    
        <div id="testimonial-list"></div>
        <button id="view-all" style="display: none;">Ver Todos os Depoimentos</button>
        <div id="average-rating" style="text-align: center; margin-top: 20px; font-weight: bold;"></div>
    </section>
    
    
    

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, orderBy, query } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";
    
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDJ_OPl1iq2pub1Ux5Ck0MXLKOKxsA9vxU",
            authDomain: "sabor-com-amor-7d875.firebaseapp.com",
            projectId: "sabor-com-amor-7d875",
            storageBucket: "sabor-com-amor-7d875.appspot.com",
            messagingSenderId: "376104206695",
            appId: "1:376104206695:web:b6c16b577f94f2125fefc2",
            measurementId: "G-P7S7SF8TCR"
        };
    
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
    
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('testimonial-form');
            const nameInput = document.getElementById('name');
            const opinionInput = document.getElementById('opinion');
            const ratingInput = document.getElementById('rating');
            const imageUpload = document.getElementById('imageUpload');
            const testimonialList = document.getElementById('testimonial-list');
            const viewAllButton = document.getElementById('view-all');
            const modal = document.createElement('div');
            const userId = 'user'; // Simulando um identificador único para o usuário
    
            modal.className = 'modal';
            modal.textContent = "Obrigado pelo seu depoimento!";
            document.body.appendChild(modal);
    
            // Carregar depoimentos existentes do Firestore
            loadTestimonials();
    
            form.addEventListener('submit', async (e) => {
                e.preventDefault(); // Previne o recarregamento da página
                const name = nameInput.value;
                const opinion = opinionInput.value;
                const rating = ratingInput.value;
                const timestamp = new Date().toLocaleString(); // Obter data e hora atual
                const image = imageUpload.files[0];
    
                // Verifique se a classificação foi selecionada
                if (rating === '0') {
                    alert("Por favor, escolha uma estrela antes de enviar."); // Alerta se a classificação não for selecionada
                    updateStarDisplay('0'); // Muda a cor da estrela para vermelho
                    return;
                }
    
                const reader = new FileReader();
                reader.onload = async function(e) {
                    await saveTestimonial(name, opinion, rating, timestamp, e.target.result);
                    nameInput.value = '';
                    opinionInput.value = '';
                    ratingInput.value = '0';
                    imageUpload.value = '';
                    showModal();
                };
    
                if (image) {
                    reader.readAsDataURL(image); // Ler o arquivo de imagem como URL de dados
                } else {
                    await saveTestimonial(name, opinion, rating, timestamp, null); // Salvar sem imagem
                    nameInput.value = '';
                    opinionInput.value = '';
                    ratingInput.value = '0';
                    showModal();
                }
            });
    
            async function saveTestimonial(name, opinion, rating, timestamp, image) {
                try {
                    await addDoc(collection(db, "testimonials"), {
                        name: name,
                        opinion: opinion,
                        rating: rating,
                        timestamp: timestamp,
                        userId: userId,
                        image: image
                    });
                    console.log("Depoimento salvo com sucesso!");
                    loadTestimonials(); // Atualiza a lista de depoimentos
                } catch (error) {
                    console.error("Erro ao salvar depoimento: ", error);
                }
            }
    
            async function loadTestimonials() {
                const q = query(collection(db, "testimonials"), orderBy("timestamp", "desc"));
                const querySnapshot = await getDocs(q);
                const testimonials = querySnapshot.docs.map(doc => doc.data());
    
                // Atualizar a lista de depoimentos
                testimonialList.innerHTML = testimonials.map(testimonial => {
                    return `
                        <div class="testimonial-item ${testimonial.rating == 5 ? 'five-star' : ''}">
                            <strong>${testimonial.name}</strong> - <span class="rating-stars">${'★'.repeat(testimonial.rating)}${'☆'.repeat(5 - testimonial.rating)}</span>
                            <p>${testimonial.opinion}</p>
                            ${testimonial.image ? `<img src="${testimonial.image}" alt="User Image" style="width: 100px; height: auto; margin-top: 10px;"/>` : ''}
                            <small class="timestamp">Comentado em: ${testimonial.timestamp}</small>
                        </div>
                    `;
                }).join('');
    
                // Exibir ou ocultar o botão "Ver Todos os Comentários"
                if (testimonials.length > 3) {
                    viewAllButton.style.display = 'block';
                    viewAllButton.textContent = `Ver Todos os Comentários (${testimonials.length})`;
                } else {
                    viewAllButton.style.display = 'none';
                }
            }
    
            function showModal() {
                modal.style.display = 'block'; // Mostrar o modal
                setTimeout(() => {
                    modal.style.display = 'none'; // Esconder após 1 segundo
                }, 1000);
            }
    
            // Funcionalidade de classificação por estrelas
            document.querySelectorAll('.star').forEach(star => {
                star.addEventListener('click', () => {
                    const rating = star.getAttribute('data-value');
                    ratingInput.value = rating;
                    updateStarDisplay(rating);
                });
            });
    
            function updateStarDisplay(rating) {
                document.querySelectorAll('.star').forEach(star => {
                    if (rating === '0') {
                        star.style.color = 'red'; // Mudar a cor da estrela para vermelho se nenhuma seleção
                        star.style.borderColor = 'red'; // Borda vermelha para as estrelas
                    } else {
                        star.style.color = star.getAttribute('data-value') <= rating ? 'gold' : '#ccc';
                        star.style.borderColor = 'transparent'; // Resetar a cor da borda
                    }
                });
            }
        });
    </script>
    
    


    <section class="service" data-aos="fade-up">
        <h1>Delivery</h1>
        <hr>
        <div data-aos="fade-up">
            <i class="fa-solid fa-motorcycle"></i>
            <p>No Sabor com Amor, entregamos nossas delícias até você! Peça pelo delivery e aproveite o sabor e carinho de nossa cozinha no conforto da sua casa.</p>
            <button onclick="enviarMensagem('Olá, vim do site, gostaria de fazer um pedido!')">Fazer pedido agora!</button>
        </div>
    </section>

    <footer id="contato" data-aos="fade-up">
        <h2>Estamos localizados em:</h2>
        <aside data-aos="fade-up">
            <p>Avenida Governador Antonio da Silva Mariz - Portal do Sol, João Pessoa - PB, Brasil</p>
            <p>Cep: 58046518</p>
            <br>
            <a href="https://wa.me/+5583981451697?text=Olá,%20gostaria%20de%20mais%20informações!" target="_blank"> <i class="fa-solid fa-phone"></i> +55 83 98145-1697</a>
            <a href="https://www.instagram.com/invites/contact/?igsh=kt0hgrvl6gnh&utm_content=vyr8vkf "> <i class="fa-brands fa-instagram"></i> Instagram</a><br><br>
            <p> <i class="fa-solid fa-clock"></i> Terça à Domingo das 10:00 às 21:00</p>
        </aside>

        <br><br>
        <p>Todos os direitos reservados | &copy 2024</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.1/aos.js"></script>
    <script>
        AOS.init(); // Inicializa o AOS
    </script>
</body>
</html>
